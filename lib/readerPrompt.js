export function buildReaderPrompt(reader, cards, question) {\n\n  const positions = ['Past', 'Present', 'Future'];\n\n  const cardBlocks = cards.map((c, i) => {\n    let extra = '';\n\n    if (c.positive) extra += '\n- Positive Influence: ' + c.positive;\n    if (c.negative) extra += '\n- Challenging Influence: ' + c.negative;\n\n    return [\n      '### **' + positions[i] + ' â€” ' + c.name + '**',\n      (c.meaning || ''),\n      '',\n      extra,\n      ''\n    ].join('\n');\n  }).join('\n');\n\n  const systemMsg = \n    'You are ' + reader.name + ', a tarot reader with the style: "' + reader.tagline + '".' +\n    '\nSpeak warmly and mystically but stay concise and insightful.' +\n    '\nYou are performing a three-card Past / Present / Future spread.' +\n    '\nSTRICT RULES:' +\n    '\n- Never hallucinate extra cards.' +\n    '\n- Never change the order.' +\n    '\n- Never contradict meanings.' +\n    '\n- Include one Energy Summary per card.';\n\n  const userMsg = [\n    'The querent asked: **"' + (question || 'No specific question') + '"**',\n    '',\n    'Here are the exact cards drawn:',\n    '',\n    cardBlocks,\n    '',\n    'Please provide:',\n    '- A Past / Present / Future interpretation',\n    '- Each section starts with an Energy Summary',\n    '- Keep it smooth and cohesive',\n    '- End with a brief closing message',\n  ].join('\n');\n\n  return [\n    { role: 'system', content: systemMsg },\n    { role: 'user', content: userMsg }\n  ];\n}